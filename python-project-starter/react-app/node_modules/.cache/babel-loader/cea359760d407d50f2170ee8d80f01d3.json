{"ast":null,"code":"const SET_USER = \"session/setUser\";\nconst REMOVE_USER = \"session/removeUser\";\n\nconst setUser = user => ({\n  type: SET_USER,\n  payload: user\n});\n\nconst removeUser = () => ({\n  type: REMOVE_USER\n});\n\nexport const login = ({\n  email,\n  password\n}) => async dispatch => {\n  // console.log(email, password);\n  const res = await fetch(\"/api/auth/login\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  const data = await res.json();\n  console.log(data.id);\n  dispatch(setUser(data));\n};\nexport const restoreUser = () => async dispatch => {\n  const res = await fetch(\"/api/auth\");\n  const data = await res.json();\n\n  if (res.ok) {\n    dispatch(setUser(data));\n  }\n};\nexport const createUser = user => async dispatch => {\n  const {\n    firstName,\n    lastName,\n    email,\n    password\n  } = user;\n  const res = await fetch(`/api/auth/signup`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  });\n  const data = await res.json();\n  dispatch(setUser(data));\n};\nexport const logout = () => async dispatch => {\n  const res = await fetch(\"/api/auth/logout\", {\n    method: \"DELETE\"\n  });\n  const data = await res.json();\n\n  if (data.message === \"User logged out\") {\n    dispatch(removeUser());\n  }\n};\n\nfunction reducer(state = initialState, action) {\n  let newState;\n\n  switch (action.type) {\n    case SET_USER:\n      return { ...state,\n        user: action.payload\n      };\n\n    case REMOVE_USER:\n      newState = Object.assign({}, state, {\n        user: null\n      });\n      return newState;\n\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","map":{"version":3,"sources":["/Users/brandonparsons/Downloads/Capstone/python-project-starter/react-app/src/store/session.js"],"names":["SET_USER","REMOVE_USER","setUser","user","type","payload","removeUser","login","email","password","dispatch","res","fetch","method","headers","body","JSON","stringify","data","json","console","log","id","restoreUser","ok","createUser","firstName","lastName","logout","message","reducer","state","initialState","action","newState","Object","assign"],"mappings":"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","sourcesContent":["const SET_USER = \"session/setUser\";\nconst REMOVE_USER = \"session/removeUser\";\n\nconst setUser = (user) => ({\n  type: SET_USER,\n  payload: user,\n});\n\nconst removeUser = () => ({\n  type: REMOVE_USER,\n});\n\nexport const login = ({ email, password }) => async (dispatch) => {\n  // console.log(email, password);\n  const res = await fetch(\"/api/auth/login\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  });\n  const data = await res.json();\n  console.log(data.id);\n  dispatch(setUser(data));\n};\n\nexport const restoreUser = () => async (dispatch) => {\n  const res = await fetch(\"/api/auth\");\n  const data = await res.json();\n  if (res.ok) {\n    dispatch(setUser(data));\n  }\n};\n\nexport const createUser = (user) => async (dispatch) => {\n  const { firstName, lastName, email, password } = user;\n  const res = await fetch(`/api/auth/signup`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(user),\n  });\n\n  const data = await res.json();\n\n  dispatch(setUser(data));\n};\n\nexport const logout = () => async (dispatch) => {\n    const res = await fetch(\"/api/auth/logout\", {\n      method: \"DELETE\",\n    });\n  \n    const data = await res.json();\n    if (data.message === \"User logged out\") {\n      dispatch(removeUser());\n    }\n  };\n\n  function reducer(state = initialState, action) {\n    let newState;\n    switch (action.type) {\n      case SET_USER:\n        return { ...state, user: action.payload };\n      case REMOVE_USER:\n        newState = Object.assign({}, state, { user: null });\n        return newState;\n      default:\n        return state;\n    }\n  }\n  \n  export default reducer;"]},"metadata":{},"sourceType":"module"}